{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./login.service\";\nclass AuthService {\n  constructor(loginService) {\n    this.loginService = loginService;\n    this.isAuthenticated_ = false;\n    this._isLoggedIn$ = new BehaviorSubject(false);\n    this.isLoggedIn$ = this._isLoggedIn$.asObservable();\n    const token = localStorage.getItem('auth_token');\n    this._isLoggedIn$.next(!!token);\n    this.isAuthenticated_ = this.checkAuthentication();\n  }\n  login(loginData) {\n    return this.loginService.login(loginData).pipe(tap(response => {\n      this._isLoggedIn$.next(true);\n      localStorage.setItem('auth_token', response.token);\n      this.isAuthenticated_ = true;\n    }));\n  }\n  checkAuthentication() {\n    const token = localStorage.getItem('auth_token');\n    if (token) {\n      return true;\n    }\n    return false;\n  }\n  isAuthenticated() {\n    return this.isAuthenticated_;\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.LoginService));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});\nexport { AuthService };","map":{"version":3,"names":["BehaviorSubject","tap","AuthService","constructor","loginService","isAuthenticated_","_isLoggedIn$","isLoggedIn$","asObservable","token","localStorage","getItem","next","checkAuthentication","login","loginData","pipe","response","setItem","isAuthenticated","i0","ɵɵinject","i1","LoginService","factory","ɵfac","providedIn"],"sources":["/Users/zpietrza/Desktop/MaNS/software_monitoring/webui/angular-app/src/app/auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { LoginService } from \"./login.service\";\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthService {\n    isAuthenticated_: boolean = false;\n    private _isLoggedIn$ = new BehaviorSubject<boolean>(false);\n    isLoggedIn$ = this._isLoggedIn$.asObservable();\n\n    constructor(private loginService: LoginService) {\n        const token = localStorage.getItem('auth_token');\n        this._isLoggedIn$.next(!!token);\n        this.isAuthenticated_ = this.checkAuthentication();\n    }\n\n    login(loginData: any) {\n        return this.loginService.login(loginData).pipe(\n            tap((response: any) => {\n                this._isLoggedIn$.next(true);\n                localStorage.setItem('auth_token', response.token);\n                this.isAuthenticated_ = true;\n            })\n        );\n    }\n\n    checkAuthentication(): boolean {\n        const token = localStorage.getItem('auth_token');\n        if (token) {\n            return true;\n        }\n        return false;\n    }\n\n    isAuthenticated(): boolean {\n        return this.isAuthenticated_;\n    }\n\n}\n"],"mappings":"AACA,SAASA,eAAe,QAAQ,MAAM;AACtC,SAASC,GAAG,QAAQ,gBAAgB;;;AAGpC,MAGaC,WAAW;EAKpBC,YAAoBC,YAA0B;IAA1B,KAAAA,YAAY,GAAZA,YAAY;IAJhC,KAAAC,gBAAgB,GAAY,KAAK;IACzB,KAAAC,YAAY,GAAG,IAAIN,eAAe,CAAU,KAAK,CAAC;IAC1D,KAAAO,WAAW,GAAG,IAAI,CAACD,YAAY,CAACE,YAAY,EAAE;IAG1C,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IAChD,IAAI,CAACL,YAAY,CAACM,IAAI,CAAC,CAAC,CAACH,KAAK,CAAC;IAC/B,IAAI,CAACJ,gBAAgB,GAAG,IAAI,CAACQ,mBAAmB,EAAE;EACtD;EAEAC,KAAKA,CAACC,SAAc;IAChB,OAAO,IAAI,CAACX,YAAY,CAACU,KAAK,CAACC,SAAS,CAAC,CAACC,IAAI,CAC1Cf,GAAG,CAAEgB,QAAa,IAAI;MAClB,IAAI,CAACX,YAAY,CAACM,IAAI,CAAC,IAAI,CAAC;MAC5BF,YAAY,CAACQ,OAAO,CAAC,YAAY,EAAED,QAAQ,CAACR,KAAK,CAAC;MAClD,IAAI,CAACJ,gBAAgB,GAAG,IAAI;IAChC,CAAC,CAAC,CACL;EACL;EAEAQ,mBAAmBA,CAAA;IACf,MAAMJ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IAChD,IAAIF,KAAK,EAAE;MACP,OAAO,IAAI;;IAEf,OAAO,KAAK;EAChB;EAEAU,eAAeA,CAAA;IACX,OAAO,IAAI,CAACd,gBAAgB;EAChC;;AA/BSH,WAAW,C;mBAAXA,WAAW,EAAAkB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,YAAA;AAAA;AAAXrB,WAAW,C;SAAXA,WAAW;EAAAsB,OAAA,EAAXtB,WAAW,CAAAuB,IAAA;EAAAC,UAAA,EAFR;AAAM;SAETxB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}