<div class="container text-center py-5">
  <div class="row">
    <div class="d-flex justify-content-center">
      <div class="card bg-dark w-100 rounded">
        <div class="card-body" style="color: white">
          <h3 class="card-title py-2">Panel serwisantów</h3>

          <div class="accordion text-dark" id="accordionExample">
            <div class="accordion-item" *ngFor="let serviceman of servicemen; let i = index;">
              <div>
                <h2 class="accordion-header" [id]="'heading' + i">
                  <button class="accordion-button collapsed" type="button" [attr.data-bs-toggle]="'collapse'"
                          [attr.data-bs-target]="'#collapse' + i" [attr.aria-expanded]="false" [attr.aria-controls]="'collapse' + i">
                    #{{i+1}} {{serviceman.email}}
                  </button>
                </h2>
                <div [id]="'collapse' + i" class="accordion-collapse collapse" [attr.aria-labelledby]="'heading' + i"
                     data-bs-parent="#accordionExample">
                  <div class="accordion-body">
                    <table class="table table-borderless my-0 w-100">
                      <tbody>
                      <tr>
                        <td style="width: 30%;" class="text-center">
                          <div class="d-flex justify-content-center">
                            <div class="serviceman-logo rounded-circle">
                              <i class="fa-solid fa-helmet-safety fa-2xl"></i>
                            </div>
                          </div>
                          <div class="px-2">
                            <table class="table my-0 w-100">
                              <tbody>
                              <tr>
                                <td style="width: 50%;">
                                  <b><small>Liczba alertów</small></b>
                                </td>
                                <td style="width: 50%;">
                                  <small>{{serviceman.alertsCount}}</small>
                                </td>
                              </tr>
                              </tbody>
                            </table>
                          </div>
                          <a class="btn btn-dark btn-block mt-2" [routerLink]="'/alerts/user'" [queryParams]="{ id: serviceman.id }">Historia alertów</a>
                        </td>
                        <td style="width: 70%;">
                          <table class="table table-borderless my-0 w-100">
                            <tbody>
                            <tr>
                              <td class="float-start">
                                <b>Imię</b>
                              </td>
                              <td>{{serviceman.firstName}}</td>
                            </tr>
                            <tr>
                              <td class="float-start">
                                <b>Nazwisko</b>
                              </td>
                              <td>{{serviceman.lastName}}</td>
                            </tr>
                            <tr>
                              <td class="float-start">
                                <b>E-mail</b>
                              </td>
                              <td>{{serviceman.email}}</td>
                            </tr>
                            <tr>
                              <td class="float-start" style="white-space: nowrap;">
                                <b>Numer telefonu</b>
                              </td>
                              <td>{{serviceman.phoneNumber}}</td>
                            </tr>
                            <tr>
                              <td class="float-start">
                                <b>Specjalizacje</b>
                              </td>
                              <td>
                                {{ getSpecializations(serviceman) }}
                              </td>
                            </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                    </table>
                  </div>
                  <!-- todo: if Admin -> delete -->
                  <a class="btn btn-dark btn-block my-5" *ngIf="isAdmin" [routerLink]="'/delete_user'">Usuń serwisanta</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
